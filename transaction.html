
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movimientos - Mi Wallet</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <style>
        body {
            font-family: 'inter', sans-serif;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(-45deg, #2b1055, #7597de, #23d5ab, #e73c7e);
            background-size: 400% 400%;
            animation: gradientMove 15s ease infinite;
            margin: 0;
        }
        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .container-card {
            max-width: 450px;
            width: 90%;
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .list-group {
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>

<div class="container-card text-center">
    <h2 class="mb-4">Últimos movimientos</h2>
    
    <div class="form-group text-left">
        <label for="filtroTipo" class="small font-weight-bold">Filtrar por tipo:</label>
        <select id="filtroTipo" class="form-control mb-3">
            <option value="todos">Ver todos</option>
            <option value="compra">Compras</option>
            <option value="deposito">Depósitos</option>
            <option value="transferencia_recibida">Transferencias recibidas</option>
        </select>
    </div>

    <ul class="list-group mb-4 text-left" id="lista-movimientos">
        </ul>

    <a href="./menu.html" class="btn btn-primary btn-block shadow-sm">Volver al menú principal</a>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
$(document).ready(function() {
   
    const listaFicticia = [
        { nombre: "Supermercado Luna", monto: -4500, tipo: "compra" },
        { nombre: "Depósito Inicial", monto: 10000, tipo: "deposito" },
        { nombre: "Transferencia de Mamá", monto: 2500, tipo: "transferencia_recibida" },
        { nombre: "Pago Netflix", monto: -1200, tipo: "compra" }
    ];

    const movimientosGuardados = JSON.parse(localStorage.getItem('movimientos')) || [];
    const listaTransacciones = [...movimientosGuardados, ...listaFicticia];

  
    function getTipoTransaccion(tipo) {
        const nombres = {
            'compra': 'Compra realizada',
            'deposito': 'Depósito',
            'transferencia_recibida': 'Transferencia recibida'
        };
        return nombres[tipo] || 'Otro';
    }

  
    function mostrarUltimosMovimientos(filtro) {
        const $lista = $('#lista-movimientos');
        $lista.empty();

      
        const filtrados = listaTransacciones.filter(m => {
            return filtro === 'todos' || m.tipo === filtro;
        });

        if (filtrados.length === 0) {
            $lista.append('<li class="list-group-item text-center">Sin movimientos</li>');
            return;
        }

        filtrados.forEach(m => {
            const esNegativo = m.monto < 0;
            const claseColor = esNegativo ? 'text-danger' : 'text-success';
            const signo = esNegativo ? '-' : '+';
            const tipoLegible = getTipoTransaccion(m.tipo);

            $lista.append(`
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <span class="d-block font-weight-bold">${m.nombre}</span>
                        <small class="text-muted">${tipoLegible}</small>
                    </div>
                    <span class="${claseColor} font-weight-bold">
                        ${signo}$${Math.abs(m.monto).toLocaleString()}
                    </span>
                </li>
            `);
        });
    }


    $('#filtroTipo').on('change', function() {
        const seleccion = $(this).val();
        mostrarUltimosMovimientos(seleccion);
    });


    mostrarUltimosMovimientos('todos');
});
</script>

</body>
</html>
